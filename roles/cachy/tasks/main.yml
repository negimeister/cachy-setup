---
- name: Install base packages and shell defaults
  import_tasks: packages.yml

- name: Configure Tailscale connectivity
  import_tasks: tailscale.yml
  when:
    - tailscale_login_server is defined
    - tailscale_auth_key is defined

- name: Configure Btrfs snapshots with snapper
  import_tasks: snapper.yml

- name: Install yay helper
  import_tasks: yay.yml

- name: Configure Docker
  import_tasks: docker.yml

- name: Deploy containerized services
  import_tasks: containers.yml

- name: Configure distrobox environment
  import_tasks: distrobox.yml

- name: Deploy keyboard layout and udev rules
  import_tasks: peripherals.yml
